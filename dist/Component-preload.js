//@ui5-bundle dev/facturas/copia/Component-preload.js
sap.ui.require.preload({
	"dev/facturas/copia/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","dev/facturas/copia/model/models"],(e,t)=>{"use strict";return e.extend("dev.facturas.copia.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(t.createDeviceModel(),"device")}})});
},
	"dev/facturas/copia/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("dev.facturas.copia.controller.App",{onInit(){}})});
},
	"dev/facturas/copia/controller/facturasCopia.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,o,n){"use strict";var i;return e.extend("dev.facturas.controller.Facturas",{onInit:function(){sap.ui.getCore().getConfiguration().setLanguage("es");i=this},onShowPdfPress:function(e){var t=e.getSource().getBindingContext().getObject().id_archivo;var o=e.getSource().getBindingContext().getObject();if(!t){sap.m.MessageToast.show("No se encontró la factura asociada.");return}var n=o.punto_venta.padStart(5,"0")+o.letra+o.numero_comprobante.padStart(8,"0");this._getPdf(t,n)},_getPdf:function(e,t){var o=this.getOwnerComponent().getManifestEntry("/sap.app/id");var n=o.replaceAll(".","/");var i=jQuery.sap.getModulePath(n);var s=`${i}/DMS/?objectId=${e}`;var r=`/DMS/?objectId=${e}`;s=`${i}/DMS/?objectId=pGKBHKJli_RwRVCZ6JKrBzdFrFrYSlZiJBh0qNXmLWE`;jQuery.ajax({url:s,method:"GET",xhrFields:{responseType:"blob"},success:e=>{this._openPdf(e,t)},error:e=>{sap.m.MessageToast.show("No se encontró la factura asociada.");console.log(e)}})},_openPdf:function(e,t){const o=new Blob([e],{type:"application/pdf"});const n=URL.createObjectURL(o);if(!this.oDialog){this.oDialog=new sap.m.Dialog({title:`Factura: ${t}`,contentWidth:"60%",contentHeight:"100%",verticalScrolling:false,horizontalScrolling:false,resizable:true,content:new sap.ui.core.HTML({content:`<iframe src='${n}' width='100%' height='100%' style='border:none;' title='Factura: ${t}'></iframe>`}),endButton:new sap.m.Button({text:"Cerrar",press:function(){this.oDialog.close()}.bind(this)})})}else{this.oDialog.setTitle(`Factura: ${t}`);this.oDialog.getContent()[0].setContent(`<iframe src='${n}' width='100%' height='100%' style='border:none;' title='Factura: ${t}'></iframe>`)}this.oDialog.open()},onFilter:function(e){let t=[];let i=this.getView();let s=i.byId("invoiceNumber");if(s.getValue()!==""){const e=s.getValue();const i=e.slice(0,5);const r=e.slice(5,6);const a=e.slice(6);const l=new o({filters:[new o("punto_venta",n.EQ,i),new o("letra",n.EQ,r),new o("numero_comprobante",n.EQ,a)],and:true});t.push(l)}let r=this.byId("dateFrom").getDateValue();let a=this.byId("dateTo").getDateValue();if(r&&a){let e=r.toISOString().split("T")[0]+"T00:00:00Z";let i=a.toISOString().split("T")[0]+"T23:59:59Z";t.push(new o("fecha_emision",n.GE,e),new o("fecha_emision",n.LE,i))}const l=this.getView().byId("invoicesList");const c=l.getBinding("rows");c.filter(t.length>0?new o(t,true):[])},onSort:function(e){var t=this.byId("invoicesList");var o=t.getBinding("rows");var n=e.getParameter("column");var i=n.getSortProperty();var s=e.getParameter("sortOrder")==="Descending";var r=new sap.ui.model.Sorter(i,s);o.sort(r);t.getColumns().forEach(function(e){e.setSorted(false)});n.setSorted(true);n.setSortOrder(s?"Descending":"Ascending")},onStatusFilterChange:function(e){const t=e.getParameter("selectedItem").getKey();const o=this.getView().byId("invoicesList");const n=o.getBinding("rows");const i=[];if(t){i.push(new sap.ui.model.Filter("estado",sap.ui.model.FilterOperator.EQ,t))}n.filter(i)},onClearFilter:function(){let e=this.getView();const t=e.byId("dateFrom");if(t){t.setDateValue(null)}const o=e.byId("dateTo");if(o){o.setDateValue(null)}const n=e.byId("invoiceNumber");if(n){n.setValue("")}const i=e.byId("statusFilter");if(i){i.setSelectedKey("estado")}const s=e.byId("invoicesList");const r=s.getBinding("rows");if(r){r.filter([]);r.sort(null);sap.m.MessageToast.show("Filtros y ordenación limpiados.")}},concatenarValores:function(e,t,o){return`${e}-${t}-${o}`}})});
},
	"dev/facturas/copia/i18n/i18n.properties":'# This is the resource bundle for dev.facturas.copia\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Consulta de Facturas Ingresadas\n\n#YDES: Application description\nappDescription=Consulta de Facturas Ingresadas\n#XTIT: Main view title\ntitle=Consulta de Facturas Ingresadas\nselectionScreen=Consulta de Facturas Ingresadas\nshipName=Nombre:\nbtnFilter=Filtrar\nbtnClearFilter=Limpiar\ninvoicesHeaderList=Consulta de Facturas Ingresadas\ndate=Fecha Desde:\ndateTo=Fecha Hasta:\ninvoiceNumber=N\\u00famero de Factura:\nstatus=Estado:\ntodos=Todos\nprocesada=Procesada\nenPreceso=En Proceso\nrechazada=Rechazada\nnroFactura=N\\u00famero de Factura\nfecha=Fecha de Factura\nimporte=Importe\nestadoFactura=Estado de la factura\nmotivoRechazo=Motivo de rechazo\nverPdf=Ver PDF\nfacturaProcesada=Factura procesada\n\n#XFLD,46.5\nflpTitle=Consulta de Facturas Ingresadas\n',
	"dev/facturas/copia/manifest.json":'{"_version":"1.64.0","sap.app":{"id":"dev.facturas.copia","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.15.7","toolsId":"0587cec6-9881-410b-bada-75ebb6c7f950"},"dataSources":{"mainService":{"uri":"odata/v4/portal/","type":"OData","settings":{"annotations":[],"localUri":"localService/metadata.xml","odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"consultaFacutrasCopia-display":{"semanticObject":"consultaFacutrasCopia","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.124.1","libs":{"sap.m":{},"sap.ui.core":{},"sap.ui.table":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"dev.facturas.copia.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"dev.facturas.copia.view","async":true,"viewPath":"dev.facturas.copia.view"},"routes":[{"name":"RoutefacturasCopia","pattern":":?query:","target":["TargetfacturasCopia"]}],"targets":{"TargetfacturasCopia":{"id":"facturasCopia","name":"facturasCopia"}}},"rootView":{"viewName":"dev.facturas.copia.view.App","type":"XML","id":"App"}},"sap.cloud":{"public":true,"service":"devfacturascopia"}}',
	"dev/facturas/copia/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"dev/facturas/copia/view/App.view.xml":'<mvc:View controllerName="dev.facturas.copia.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"dev/facturas/copia/view/facturasCopia.view.xml":'<mvc:View controllerName="dev.facturas.copia.controller.facturasCopia"\n\t\txmlns:cards="sap.f.cards"\n\t\txmlns:rowmodes="sap.ui.table.rowmodes"\n\t\txmlns="sap.ui.table"\n\t\txmlns:mvc="sap.ui.core.mvc"\n\t\txmlns:u="sap.ui.unified"\n\t\txmlns:c="sap.ui.core"\n\t\txmlns:m="sap.m"\n\t\theight="100%"><m:Page\n\t\tid="page"\n\t\tclass="sapUiContentPadding"\n\t\ttitle="{i18n>selectionScreen}"\n\t\tenableScrolling="true"><m:content><m:Panel id="panel"><m:Label \n\t\t\t\t\tid="labelInvoiceNumber"\n\t\t\t\t\tlabelFor="invoiceNumber"\n\t\t\t\t\ttext="{i18n>invoiceNumber}"\n\t\t\t\t\tclass="sapUiSmallMargin"\n\t\t\t\t\tdesign="Bold"/><m:Input \n\t\t\t\t\tid="invoiceNumber" \n\t\t\t\t\twidth="100px"/><m:Label \n\t\t\t\t\tid="labelDate"\n\t\t\t\t\ttext="{i18n>date}"\n                    class="sapUiSmallMargin"\n\t\t\t\t\tdesign="Bold"/><m:DatePicker \n\t\t\t\t\tid="dateFrom"\n\t\t\t\t\ttextAlign="Initial"\n\t\t\t\t\tdisplayFormat="dd/MM/yyyy"\n\t\t\t\t\tvalueFormat="yyyy/MM/dd"\n\t\t\t\t\twidth="150px"\n\t\t\t\t\tplaceholder="ej: 01/01/2024"/><m:Label \n\t\t\t\t\tid="laberDateTo"\n\t\t\t\t\ttext="{i18n>dateTo}"\n\t\t\t\t\tclass="sapUiSmallMargin"\n\t\t\t\t\tdesign="Bold"/><m:DatePicker \n\t\t\t\t\tid="dateTo"\n\t\t\t\t\ttextAlign="Initial"\n\t\t\t\t\tdisplayFormat="dd/MM/yyyy"\n                    valueFormat="yyyy-MM-dd"\n                    width="150px"\n                    placeholder="ej: 01/01/2024"/><m:Label \n\t\t\t\t\tid="status"\n\t\t\t\t\ttext="{i18n>status}"\n\t\t\t\t\tclass="sapUiSmallMargin"\n\t\t\t\t\tdesign="Bold"/><m:Select id="statusFilter" change="onStatusFilterChange" width="102px" ><m:items><c:Item id="estado"    key="estado" text="{i18n>todos}"/><c:Item id="procesada" key="S"      text="{i18n>procesada}"/><c:Item id="enProceso" key="W"      text="{i18n>enPreceso}"/><c:Item id="rechazada" key="E"      text="{i18n>rechazada}"/></m:items></m:Select><m:Button \n\t\t\t\t\tid="btnFilter"\n\t\t\t\t\ttext="{i18n>btnFilter}"\n                    icon="sap-icon://filter"\n                    press="onFilter"\n                    class="sapUiSmallMarginEnd"/><m:Button \n\t\t\t\t\tid="btnClearFilter"\n\t\t\t\t\ttext="{i18n>btnClearFilter}"\n                    icon="sap-icon://clear-filter"\n                    press="onClearFilter"\n                    class="sapUiSmallMarginEnd"/><Table\n\t\t\t\t\tid="invoicesList"\n\t\t\t\t\tclass="sapUiResponsiveMargin table"\n\t\t\t\t\tselectionMode="None"\n\t\t\t\t\trows="{ path: \'/Datos_Extraidos\', \n\t\t\t\t\t\t\tsorter: {path:\'fecha_emision\', descending: true}\n\t\t\t\t\t\t  }"\n\t\t\t\t\tariaLabelledBy="title"\n\t\t\t\t\tenableBusyIndicator="true"\n\t\t\t\t\talternateRowColors="true"\n\t\t\t\t\tenableColumnReordering="true"\n\t\t\t\t\tthreshold="100"\n\t\t\t\t\tvisibleRowCount="14"><columns><Column\n\t\t\t\t\t\t\tid="nroFac"\n\t\t\t\t\t\t\tsortProperty="punto_venta"\n\t\t\t\t\t\t\thAlign="Center"\n\t\t\t\t\t\t\t><m:Label id="lblNroFac" text="{i18n>nroFactura}"/><template><m:Text id="txtNroFac" text="{ parts: [ {path: \'punto_venta\'}, {path: \'letra\'}, {path: \'numero_comprobante\'} ],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   formatter: \'.concatenarValores\' }"/></template></Column><Column\n\t\t\t\t\t\t\tid="deliverydate"\n\t\t\t\t\t\t\tsortProperty="fecha_emision"\n\t\t\t\t\t\t\thAlign="Center"><m:Label id="lblFecha" text="{i18n>fecha}" /><template><m:Text id="fecha" text="{\n\t\t\t\t\t\t\t\t\tpath: \'fecha_emision\',\n\t\t\t\t\t\t\t\t\ttype: \'sap.ui.model.type.Date\',\n\t\t\t\t\t\t\t\t\tformatOptions: {source: {pattern: \'dd/MM/yyyy\'}, style: \'short\'}\n\t\t\t\t\t\t\t\t}" wrapping="false" /></template></Column><Column\n\t\t\t\t\t\t\tid="monto"\n\t\t\t\t\t\t\tsortProperty="total"\n\t\t\t\t\t\t\thAlign="Center"><m:Label id="lblImporte" text="{i18n>importe}" /><template><m:Label id="cellTotal" text="{ parts:[\'total\',\'\'],\n                                                           type:\'sap.ui.model.type.Currency\',\n                                                           formatOptions:{currencyCode: false}\n                                                            }" /></template></Column><Column\n\t\t\t\t\t\t\tid="colEstado"\n\t\t\t\t\t\t\tsortProperty="estado" \n\t\t\t\t\t\t\thAlign="Center"><m:Label id="lblEstado" text="{i18n>estadoFactura}" /><template><m:ObjectStatus id="cellStatus"\n\t\t\t\t\t\t\t\t\ttext="{= ${estado} === \'S\' ? \'Factura procesada\' : ${estado} === \'E\' ? \'Factura rechazada\' : \'Factura en proceso\'}"\n\t\t\t\t\t\t\t\t\ticon="{= ${estado} === \'S\' ? \'sap-icon://accept\' : ${estado} === \'E\' ? \'sap-icon://error\' : \'sap-icon://status-in-process\'}"\n\t\t\t\t\t\t\t\t\tstate="{= ${estado} === \'S\' ? \'Success\' : ${estado} === \'E\' ? \'Error\' : \'Warning\'}" /></template></Column><Column \n\t\t\t\t\t\t\tid="razon" \n\t\t\t\t\t\t\thAlign="Center"><m:Label id="lblRazon" text="{i18n>motivoRechazo}" /><template><m:ObjectStatus id="cellRazon" \n\t\t\t\t\t\t\t\t\ttext="{= ${estado} === \'E\' ? ${razon} : \'\' }" \n\t\t\t\t\t\t\t\t\ticon="{= ${estado} === \'W\' ? \'sap-icon://less\' : \'\' }{= ${estado} === \'S\' ? \'sap-icon://less\' : \'\' }"/></template></Column><Column id="col" width="5rem" hAlign="Center"><m:Label id="lblPdf" text="{i18n>verPdf}" /><template><m:Button \n\t\t\t\t\t\t\t\t\tid="btnPdf"\n\t\t\t\t\t\t\t\t\ticon="sap-icon://pdf-attachment"\n\t\t\t\t\t\t\t\t\tpress="onShowPdfPress"\n\t\t\t\t\t\t\t\t\t/></template></Column><Column id="idArchivo" width="0rem"><template><m:Text id="txtIdArchivo" text="{id_archivo}" visible="false"/></template></Column></columns></Table><c:HTML id="idFrame"/></m:Panel></m:content></m:Page></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
